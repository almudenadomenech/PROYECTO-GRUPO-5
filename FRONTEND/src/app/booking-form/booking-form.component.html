
<div class="container mt-5">
  <div class="row">
    <div class="col-lg-8">
      @if (showConfirmMessage) {
        <ngb-alert type="success" [dismissible]="false" class="mt-5" style="min-height: 200px">
          Se ha completado tu reserva para la casa {{house?.title}}.


          <br>El código de tu reserva es {{booking?.id}}
          <br> Para cualquier duda contacte con soporte&commat;certidevs.com
        </ngb-alert>
        <button class="w-100 btn btn-primary btn-lg" routerLink="/houses">Volver a Casa</button>


      } @else {
        <form class="mt-5"
        [formGroup]="bookingForm"
        (ngSubmit)="save()">

        <h1 class="mb-3">Reserva de Casa</h1>

        <div class="form-floating mb-3">
          <input type="date" class="form-control"
          id="entryDate" formControlName="entryDate"
          placeholder="yyyy-mm-dd" (change)="calculatePrice()">
          <label for="entryDate">Fecha inicio</label>
        </div>

        <div class="form-floating mb-3">
          <input type="date" class="form-control"
          id="departureDate" formControlName="departureDate"
          placeholder="yyyy-mm-dd" (change)="calculatePrice()">
          <label for="departureDate">Fecha fin</label>
        </div>

        <div class="form-floating mb-3">
          <input type="number" min="1" step="1" class="form-contol" id="people" formControlName="people" 
          placeholder="" (change)="calculatePrice()" 
          aria-label="people" class="form-control">
          <label for="people">Número de personas</label>
        </div> 

        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox"
          id="cleaningService" formControlName="cleaningService" (change)="calculatePrice()">
          <label class="form-check-label" for="cleaningService">
            Servicio de limpieza 30 € 
          </label>
        </div>

        <br>
        <h3>Forma de Pago</h3>

          <div class="form-check mt-3">
    <input id="credit" name="paymentMethod" type="radio" class="form-check-input" checked="" required="">
    <label class="form-check-label" for="credit">Tarjeta de crédito</label>
  </div>
  <!-- <div class="form-check">
    <input id="debit" name="paymentMethod" type="radio" class="form-check-input" required="">
    <label class="form-check-label" for="debit">Tarjeta de débito</label>
  </div>
  <div class="form-check">
    <input id="paypal" name="paymentMethod" type="radio" class="form-check-input" required="">
    <label class="form-check-label" for="paypal">PayPal</label>
  </div> --> 

       </form>


       <div class="row gy-3 mt-1">
        <div class="col-md-6">
          <label for="cc-name" class="form-label">Nombre en la tarjeta</label>
          <input type="text" class="form-control" id="cc-name" placeholder="" required="">
          <small class="text-body-secondary">Nombre completo tal como aparece en la tarjeta</small>
          <div class="invalid-feedback">
            Nombre obligatorio
          </div>
        </div>

        <div class="col-md-6">
          <label for="cc-number" class="form-label">Número de tarjeta de crédito</label>
          <input type="text" class="form-control" id="cc-number" placeholder="" required="">
          <div class="invalid-feedback">
            Número de tarjeta de crédito
          </div>
        </div>

        <div class="col-md-3">
          <label for="cc-expiration" class="form-label">Expiración</label>
          <input type="text" class="form-control" id="cc-expiration" placeholder="" required="">
          <div class="invalid-feedback">
            Expiración obligatorio
          </div>
        </div>

        <div class="col-md-3">
          <label for="cc-cvv" class="form-label">CVV</label>
          <input type="text" class="form-control" id="cc-cvv" placeholder="" required="">
          <div class="invalid-feedback">
            Código de seguridad obligatorio
          </div>
        </div>
      </div>

      <div _ngcontent-ng-c3189770292="" >
        <div> 
          @if (bookingForm) {
            <div class="d-grid gap-2 mt-3">
              <button _ngcontent-ng-c3189770292="" class="btn btn-dark">Finalizar pago</button>        </div>
          }
      </div>
    </div>
<br>
    }

  </div>

  <div class="col-md-5 col-lg-4 order-md-last">

    <h4 class="mt-5 d-flex justify-content-between align-items-center mb-3">
      <span>Tu reserva</span>

      <li class="list-group-item d-flex justify-content-between lh-sm">
        <div>

            <h6 class="badge bg-success rounded-pill"> {{numDays}} días</h6>

        </div>
      </li>
    </h4>
    <ul class="list-group mb-4">
      @if (house) {
      <li class="list-group-item d-flex justify-content-between lh-sm">
        <div>
          <span>Nombre de la casa</span>
          <br>
            <h6 >{{house.title}}</h6>

        </div>
      </li>
      }

      @if (house) {
        <li class="list-group-item d-flex justify-content-between lh-sm">
          <div>
            <span>Precio noche/persona</span>
            <br>
              <small>{{house.price}} €</small>

          </div>
        </li>
        } 



        <li class="list-group-item d-flex justify-content-between lh-sm">

          <div>
            <span>Personas</span>
              <h6 class="my-0">{{numPeople}}</h6>

          </div>

          <li class="list-group-item d-flex justify-content-between ">
          @if(bookingForm.get('cleaningService')?.value) {

              <div>
                <h6>Servicio de Limpieza</h6>

              </div>
              <br>
              <span class="text-body-secondary">30 €</span>

          }
        </li>

      <li class="list-group-item d-flex justify-content-between">
        <span>Total (Euros)</span>
        <strong>{{price}}</strong>
      </li>

    </ul>

    <button class="w-100 btn btn-primary btn-lg" type="submit">Finalizar reserva</button>

  </div>
</div>
</div>